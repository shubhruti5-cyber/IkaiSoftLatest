
@{
    ViewData["Title"] = "Compiler";
}


<div class="row">
    <div class="col-md-6">
        <h4>Write your code</h4>
        <select id="language" class="form-control mb-2">
            <option value="html">HTML</option>
            <option value="python">Python</option>
            <option value="java">Java</option>
            <option value="c">C</option>
        </select>
        <div id="editor" style="height:400px;border:1px solid #ccc;"></div>
        <button class="btn btn-primary mt-2" onclick="runCode()">Run Code</button>
    </div>
    <div class="col-md-6">
        <h4>Output</h4>
        <pre id="output" style="height:400px;overflow:auto;border:1px solid #ccc;"></pre>
        <iframe id="htmlFrame" style="display:none;width:100%;height:400px;border:1px solid #ccc;"></iframe>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs/loader.min.js"></script>
<script>
    require.config({ paths: { vs: "https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs" }});
    require(["vs/editor/editor.main"], function () {
        window.editor = monaco.editor.create(document.getElementById("editor"), {
            value: "<h1>Hello World</h1>",
            language: "html"
        });
    });

    function runCode() {
        const code = window.editor.getValue();
        const lang = document.getElementById("language").value;

        if (lang === "html") {
            document.getElementById("htmlFrame").style.display = "block";
            document.getElementById("output").style.display = "none";
            document.getElementById("htmlFrame").srcdoc = code;
        } else {
            document.getElementById("htmlFrame").style.display = "none";
            document.getElementById("output").style.display = "block";

            fetch(`/Compiler/Run/${lang}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ Code: code })
            })
            .then(res => res.json())
            .then(data => {
                document.getElementById("output").textContent = data.output;
            });
        }
    }
</script>


